@model IEnumerable<IMS.Models.TraceDetail>
@using (Ajax.BeginForm("_TraceDetails", new { traceNo = ViewBag.TraceNo }, new AjaxOptions { UpdateTargetId = "traceDetail-tool", HttpMethod = "Post" }))
{
  <div id="traceDetail-tool">
    <div class="row">

      <div class="col-md-8">
        @Html.Action("_CreateTraceDetail", new { traceNo = ViewBag.TraceNo })

      </div>
      <div class="col-md-4">
        <h3>
          目前日齡:156 天
        </h3>
        <h3>
          目前豬舍:保育舍
        </h3>
        <h3>
          總飼料量:46kg
        </h3>
      </div>
    </div>

    <hr class="underline-b" />

    <div class="row">
      @foreach (var item in Model)
      {

        @*7.3 在/Shared/_CommentsForPhoto.cshtml加入IEnumerable<T>及foreach (var item in Model){}*@
        <div class="col-md-4 col-sm-6">
          <div class="panel panel-info">
            <div class="panel-heading clearfix">
              <div class="panel-title pull-left panel-tool">
                <h4>@item.WorkDate.ToString("yyyy/MM/dd")</h4>
              </div>
              <div class="btn-group pull-right">
                @Html.ActionLink(IMS.Resources.Resource.Comm_Delete, "DeleteTraceDetail", new { seqNo = item.SeqNo }, new { @class = "btn btn-default", onclick = "return confirm('您確定要刪除嗎??')" })

              </div>
            </div>
            <div class="panel-body">
              <div class="form-group">
                @Html.LabelFor(model => model.FirstOrDefault().WorkType, htmlAttributes: new { @class = "control-label col-md-6 text-right" })
                <div class="col-md-6">
                  <p>@item.WorkType</p>
                </div>
              </div>
              <div class="form-group">
                @Html.LabelFor(model => model.FirstOrDefault().WorkContent, htmlAttributes: new { @class = "control-label col-md-6 text-right" })
                <div class="col-md-6">
                  <p>@item.WorkContent</p>
                </div>
              </div>
              @if (item.WorkMemo != null)
              {
                <div class="form-group">
                  @Html.LabelFor(model => model.FirstOrDefault().WorkMemo, htmlAttributes: new { @class = "control-label col-md-6 text-right" })
                  <div class="col-md-6">
                    <p>@item.WorkMemo</p>
                  </div>
                </div>
              }
            </div>
            @*//7-8-2 在_CommentsForPhoto.cshtml加入Delete連結*@
            @*<div class="panel-footer">
                  @Html.ActionLink(IMS.Resources.Resource.Comm_Delete, "Delete", new { id = item.SeqNo }, new { @class = "btn btn-warning", onclick = "return confirm('您確定要刪除嗎??')" })
              </div>*@
          </div>
        </div>
      }

    </div>
  </div>
}
